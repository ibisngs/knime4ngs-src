<?xml version="1.0" encoding="UTF-8"?>
<knimeNode icon="./icon_d_green.png" type="Source" xmlns="http://knime.org/node/v2.8" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://knime.org/node/v2.10 http://knime.org/node/v2.10.xsd">
    <name>VEP</name>
    
    <shortDescription>
        Variant Effect Predictor
    </shortDescription>
    
    <fullDescription>
        <intro>
        	This node is a wrapper for the Variant Effect Predictor from Ensembl.
        	By default VEP annotates SIFT and PolyPhen scores.
        	The format of the output file is vcf.
        	The node allows to use the plugin LOFTEE for the annotation of LOF alleles.
        	<br />
        	Source: <a href="http://www.ensembl.org/info/docs/tools/vep/index.html">http://www.ensembl.org/info/docs/tools/vep/index.html</a>
        	<br />
        	<br />
        	LOFTEE is a VEP plugin to identify LOF (loss-of-function) variants.
        	It implements a set of filters to deem stop-gained, splice site disrupting and frameshift variants as low-confidence LOFs.
        	<br />
        	Source: <a href="https://github.com/konradjk/loftee">https://github.com/konradjk/loftee</a>
        	
        	<!--
        	<br />
        	<br />
        	CADD is a VEP plugin that retrieves CADD (Combined Annotation Dependent Depletion) scores for variants from one or two tabix-indexed CADD data files.
        	<br />
        	Source: <a href="https://github.com/ensembl-variation/VEP_plugins/blob/master/CADD.pm">https://github.com/ensembl-variation/VEP_plugins/blob/master/CADD.pm</a>
        	<br />
        	<br />
        	ExAC is a VEP plugin that retrieves that retrieves ExAC (Exome Aggregation Consortium Data Set) allele frequencies
        	<br />
        	Source: <a href="https://github.com/ensembl-variation/VEP_plugins/blob/master/ExAC.pm">https://github.com/ensembl-variation/VEP_plugins/blob/master/ExAC.pm</a>
        	-->
        </intro>
        
        <tab name="Options">
            <option name="HTE">
        		Set a threshold for repeated execution.
        		Only used if HTE is enabled in the preference page.
        	</option>
            <option name="Path to variant_effect_predictor.pl">
            	Set the path to the VEP perl script. It can usually be found in ensembl-tools-release-../scripts/variant_effect_predictor.
            </option>
            <option name="Path to fastA file">
            	Set the path to the reference file (fastA format)
            	The plugin LOFTEE won't work properly if no fasta file is given!
            	In general, the fastA file is downloaded at the same time as VEP is installed. It can be found in the cache directory.
            </option>
            <option name="Folder for output files">
            	Set the path to a folder where the output files should be stored.<br />
            	If "Overwrite" is checked, existing files will be overwritten.
            </option>
            <option name="Further options"> <br />
            <ul>
            <li>
            Use cache: It is recommended to use a cache as accessing data in the cache is much faster than access it from the database.
            	The cache is usually build during the installation of the Ensembl API. 
            	Otherwise, you can find information in the VEP documentation (see VEP link above). 
            </li>
            <li>
            Number of forks: Set the number of forks to be used.<br />
            Forking can dramatically improve the runtime of VEP. <br />
            If LOFTEE is used, it will run ignoring the conservation file as there occur errors when it is accessed by multiple threads.
            </li>
            <li>
           	Coding only: If this checkbox is checked, VEP will only return consequences that affect coding regions of transcripts.
            </li>
            <li>
            Choose transcript set:
            	VEP uses <b>Ensembl transcripts</b> (=GENCODE Comprehensive) by default.
            	By choosing <b>GENCODE</b> basic your analysis is limited to transcripts belonging to the GENCODE basic set.
            	This set has fragmented or problematic transcripts removed.
            	Alternatively, you can choose the <b>RefSeq</b> transcript set.
            </li>
            </ul>
            </option>
		</tab>
		
		<tab name = "Advanced">
            <option name="Choose type of statistic file">
            	VEP can create a statistic file in html or plain text format. 
            </option>
            <option name="Cache directory">
            	Set the path to the cache directory.<br />
            	(Default: "$HOME/.vep/")
            </option>
            <option name="Plugin directory">
            	Set the path to the plugin directory.<br />
            	(Default: "$HOME/.vep/Plugins")
            </option>
            <option name="Specify further plugin/options">
            	Commit further options/plugins to VEP.
            </option>
        </tab>
        <tab name="LOFTEE">
            <option name="Use LOFTEE">
            	Check this box if you want to use LOFTEE.
            	Requires the plugin file in the plugin directory.
            </option>
            <option name="Path to human_ancestor.fa.gz">
            	You can find a download link for this file following the LOFTEE link above.
            </option>
            <option name="Path to phylocsf.sql">
            	You can find a download link for this file following the LOFTEE link above.
            	The conservation file will be ignored, if forking is enabled.
            </option>
            <option name="Samtools PATH">
            	Set the path to the SAMTOOLS executable.
            </option>
        </tab>
        <!--<tab name="CADD">
        	<option name="Use CADD?">
        		Check this box if you want to annotate CADD scores.
        		Requires the plugin file in the plugin directory.
        	</option>
        	<option name="Path to CADD file(s)">
        		You can specify two CADD files, e.g. one containing scores for SNVs and the other for InDels.
        		CADD files can be downloaded from <a href="http://cadd.gs.washington.edu/download/">http://cadd.gs.washington.edu/download/</a>
        	</option>
        </tab>
        <tab name="ExAC">
        	<option name="Use ExAC?">
        		Check this box if you want to annotate ExAC allele frequencies.
        		Requires the plugin file in the plugin directory.
        	</option>
        	<option name="Path to ExAC file">
        		ExAC files can be downloaded from <a href="ftp://ftp.broadinstitute.org/pub/ExAC_release/current">ftp://ftp.broadinstitute.org/pub/ExAC_release/current</a>
        	</option>
        </tab>-->
    </fullDescription>
    
    <ports>
        <inPort index="0" name="">
        	Cell 0: Path to VCF file.
        </inPort>
        <outPort index="0" name="">
        	Cell 0: Path2VEP_AnnotationVCF
        </outPort>
    </ports>    
</knimeNode>
